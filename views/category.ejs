<%- include('./partials/header') %>
    <div class="w-full min-h-screen flex flex-col md:flex-row gap-10">

        <div class="relative w-full md:w-[25%] h-full flex justify-center items-center pt-10">
          <button id="menuToggle"
          class="absolute p-1 bg-blue-900 text-white left-4 z-50 md:hidden  transform -translate-x-[2vw] transition-transform duration-300 ease-in-out z-40">☰
          Filter</button>
      <form id="filterForm" action="/products" method="GET"
          class="absolute p-10 lg:relative md:relative  min-h-screen md:block fixed inset-y-0 md:top-0 top-0 left-0 w-64 md:bg-transparent bg-blue-900 md:text-black text-white transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40">
                <h2 class="text-lg font-bold">Price</h2>

                <label>
                    <input type="checkbox" name="price" value="0-10000">
                    Below ₹ 10,000
                </label><br>

                <label>
                    <input type="checkbox" name="price" value="10000-20000">
                    ₹ 10,000 - ₹ 20,000
                </label><br>

                <label>
                    <input type="checkbox" name="price" value="20000-30000">
                    ₹ 20,000 - ₹ 30,000
                </label><br>

                <label>
                    <input type="checkbox" name="price" value="30000-40000">
                    ₹ 30,000 - ₹ 40,000
                </label><br>

                <label>
                    <input type="checkbox" name="price" value="50000-1000000">
                    ₹ 50,000 and Above
                </label><br>

                <button type="submit" class="bg-blue-500 text-white px-4 py-2 mt-2">Apply Filters</button>
            </form>
        </div>

        <div class="products w-full max-h-[40vh] flex flex-wrap justify-center gap-6 my-10 px-4 sm:px-12 animate-fadeIn">
  <% products.forEach(product=> { %>
    <a href="/product/<%=product._id%>" class="group">
      <div
        class="bg-white shadow-xl rounded-2xl overflow-hidden w-[45vw] sm:w-[28vw] md:w-[17vw] hover:shadow-2xl hover:-translate-y-2 transition-all duration-300">
        <% if (product.images && product.images.length> 0) { %>
          <img src="data:image/jpeg;base64,<%= product.images[0].toString('base64') %>"
            class="w-full h-48 sm:h-60 object-cover group-hover:scale-105 transition-transform duration-500" />
          <% } else { %>
            <p>No images available for this product.</p>
            <% } %>
              <div class="p-3 sm:p-4">
                <h2 class="capitalize font-semibold text-lg truncate"><%=product.name%></h2>
                <p class="py-1 px-2 text-xs bg-gray-100 rounded-lg inline-block capitalize">
                  <%=product.category%>
                </p>
                <p class="text-gray-400 text-sm mt-1">By Padmavati Jewels</p>

                <div class="flex justify-between items-center mt-3 text-sm sm:text-base">
                  <span class="text-yellow-600 font-semibold">₹<%=Number(Number(product.price)-Number(product.discount))%></span>
                  <span class="line-through text-gray-400">₹<%=product.price%></span>
                  <span class="text-green-600">SAVE ₹<%=product.discount?product.discount:0%></span>
                </div>

                <a class="w-full block mt-3" href="/add-to-cart/<%=product._id%>">
                  <button
                    class="w-full uppercase text-white bg-black py-2 rounded-md hover:bg-yellow-600 transition duration-300">
                    Add to Cart
                  </button>
                </a>
              </div>
      </div>
    </a>
    <% }); %>
</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.6.0/nouislider.min.js"></script>
    <script>
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('filterForm');

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            menuToggle.classList.toggle('translate-x-[40vw]');
        });
    </script>
    <script src="../javascripts/script.js"></script>
    <%- include('./partials/footer') %>